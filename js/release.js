/*! weather: v0.0.1 (webpack: v1.10.1) */
!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var n=i(4),s=i(6),a=i(25),r=i(9),o=i(5);n.exit=function(){window.parent!==window?window.parent.postMessage("hide","*"):location.href=i(29)()||"file:///home/web/services.html"},n.addListeners({load:function(){var t=0;window.parent!==window&&window.parent.postMessage("show","*"),n.environment={};try{n.environment=JSON.parse(gSTB.GetEnv('{"varList": ["Image_Desc", "language", "weather_conf"]}')).result}catch(e){}n.settings={locations:[{name:"",fullName:"",lat:0,lon:0}],englishMetric:null};try{n.settings=JSON.parse(gSTB.LoadUserData(o.fileName)),n.data.host||null===n.settings&&(n.settings={locations:[{name:"",address:"",lat:0,lon:0}],englishMetric:null})}catch(e){}null===n.settings.englishMetric&&(n.settings.englishMetric="englishSys"===n.environment.weather_conf),gSTB.EnableVKButton(!0),stbWindowMgr.SetVirtualKeyboardCoord("bottom"),0===n.settings.locations[0].lat&&r.once("load",function(){++t,2===t&&s.navigate("pageMain")}),r.load({name:"",address:"",lat:0,lon:0}),a.load({name:n.environment.language},function(){s.init([i(23),i(24)]),s.pages.forEach(function(t){t.emit("load")}),0===n.settings.locations[0].lat?(++t,2===t&&s.navigate("pageMain")):s.navigate("pageMain")})},unload:function(){}})},function(t,e,i){"use strict";function n(t){var e,i=this;if(t=t||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!t.propagate,s.call(this,t.data),void 0!==t.$node?this.$node=t.$node:this.$node=document.createElement("div"),this.$body=t.$body||this.$node,this.$node.className+=" component "+(t.className||""),this.id=t.id||this.$node.id||"cid"+r++,t.parent&&t.parent.add(this),t.visible===!1&&this.hide(),t.focusable===!1&&(this.focusable=!1),this.defaultEvents){t.events=t.events||{};for(e in this.defaultEvents)t.events[e]=t.events[e]||this.defaultEvents[e]}t.events&&this.addListeners(t.events),t.children&&this.add.apply(this,t.children),this.$node.addEventListener("click",function(t){0===t.button&&(i.focus(),i.events.click&&i.emit("click",{event:t})),t.stopPropagation()})}var s=i(2),a=i(6),r=0;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.defaultEvents=null,n.prototype.add=function(t){var e;for(e=0;e<arguments.length;e++)t=arguments[e],this.children.push(t),t.parent=this,t.$node&&null===t.$node.parentNode&&this.$body.appendChild(t.$node),this.events.add&&this.emit("add",{item:t})},n.prototype.remove=function(){this.parent&&(a.current.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(t){t.remove()}),this.removeAllListeners(),this.$node.parentNode.removeChild(this.$node),this.events.remove&&this.emit("remove")},n.prototype.focus=function(t){var e=a.current,i=e.activeComponent;return this.focusable&&this!==i?(i&&i.blur(),e.activeComponent=i=this,i.$node.classList.add("focus"),i.events.focus&&i.emit("focus",t),!0):!1},n.prototype.blur=function(){var t=a.current,e=t.activeComponent;return this.$node.classList.remove("focus"),this===e?(t.activeComponent=null,this.events.blur&&this.emit("blur"),!0):!1},n.prototype.show=function(t){return this.visible?!0:(this.$node.classList.remove("hidden"),this.visible=!0,this.events.show&&this.emit("show",t),!0)},n.prototype.hide=function(){return this.visible?(this.$node.classList.add("hidden"),this.visible=!1,this.events.hide&&this.emit("hide"),!0):!0},t.exports=n},function(t,e,i){"use strict";function n(){this.events={}}n.prototype={addListener:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},once:function(t,e){var i=this;this.events[t]=this.events[t]||[],this.events[t].push(function n(s){e(s),i.removeListener(t,n)})},addListeners:function(t){var e;if("object"==typeof t)for(e in t)t.hasOwnProperty(e)&&this.addListener(e,t[e])},removeListener:function(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}),0===this.events[t].length&&(this.events[t]=void 0))},removeAllListeners:function(t){0===arguments.length?this.events={}:t&&(this.events[t]=void 0)},emit:function(t,e){var i,n=this.events[t];if(n)for(i=0;i<n.length;i++)n[i].call(this,e)}},n.prototype.constructor=n,t.exports=n},function(t,e,i){"use strict";t.exports={back:8,"delete":46,channelPrev:1009,channelNext:9,ok:13,exit:27,up:38,down:40,left:37,right:39,pageUp:33,pageDown:34,end:35,home:36,volumeUp:107,volumeDown:109,f1:112,f2:113,f3:114,f4:115,refresh:116,frame:117,phone:119,set:120,tv:121,menu:122,web:123,mic:2032,rewind:2066,forward:2070,app:2076,usbMounted:2080,usbUnmounted:2081,playPause:2082,stop:2083,power:2085,record:2087,info:2089,mute:2192,clock:2032,audio:2071,keyboard:2076}},function(t,e,i){"use strict";var n,s,a=i(26),r=i(6),o=i(3),d={};i(27),window.parent&&window.parent.gSTB&&(window.dvbManager=window.parent.dvbManager,window.epgManager=window.parent.epgManager,window.gSTB=window.parent.gSTB,window.pvrManager=window.parent.pvrManager,window.stbDownloadManager=window.parent.stbDownloadManager,window.stbStorage=window.parent.stbStorage,window.stbUpdate=window.parent.stbUpdate,window.stbUPnP=window.parent.stbUPnP,window.stbWebWindow=window.parent.stbWebWindow,window.stbWindowMgr=window.parent.stbWindowMgr,window.timeShift=window.parent.timeShift),n=new a({debug:!1,host:!0,screen:null,time:{init:+new Date,load:0,done:0}}),n.setScreen=function(t){var e;return t?(t.availHeight=t.height-(t.availTop+t.availBottom),t.availWidth=t.width-(t.availLeft+t.availRight),window.moveTo(0,0),window.resizeTo(t.width,t.height),e=document.querySelector("link[rel=stylesheet]"),e&&e instanceof HTMLLinkElement&&document.head.removeChild(e),e=document.createElement("link"),e.rel="stylesheet",e.href="css/release."+t.height+".css?"+ +new Date,document.head.appendChild(e),this.data.metrics=t,!0):!1},n.EVENT_END_OF_FILE=1,n.EVENT_GET_MEDIA_INFO=2,n.EVENT_PLAYBACK_BEGIN=4,n.EVENT_CONTENT_ERROR=5,n.EVENT_DUAL_MONO_DETECT=6,n.EVENT_INFO_GET=7,n.EVENT_SUBTITLE_LOAD_ERROR=8,n.EVENT_SUBTITLE_FIND=9,n.EVENT_HDMI_CONNECT=32,n.EVENT_HDMI_DISCONNECT=33,n.EVENT_RECORD_FINISH_SUCCESSFULL=34,n.EVENT_RECORD_FINISH_ERROR=35,n.EVENT_DVB_SCANING=40,n.EVENT_DVB_FOUND=41,n.EVENT_DVB_CHANELL_EPG_UPDATE=42,n.EVENT_DVB_ANTENNA_OFF=43,n.setScreen(i(31)[screen.height]);for(s in o)"volumeUp"!==s&&"volumeDown"!==s&&(d[o[s]]=!0);n.defaultEvents={load:function(t){n.data.time.load=t.timeStamp,n.events[t.type]&&n.emit(t.type,t),r.pages.forEach(function(e){e.events[t.type]&&e.emit(t.type,t)}),n.data.time.done=+new Date,n.events.done&&n.emit("done",t)},unload:function(t){n.events[t.type]&&n.emit(t.type,t),r.pages.forEach(function(e){e.events[t.type]&&e.emit(t.type,t)})},error:function(t){},keydown:function(t){var e,i=r.current;0!==t.keyCode&&(t.code=t.keyCode,t.shiftKey&&(t.code+=1e3),t.altKey&&(t.code+=2e3),e=i.activeComponent,e&&e!==i&&(e.events[t.type]&&e.emit(t.type,t),!t.stop&&e.propagate&&e.parent&&e.parent.events[t.type]&&e.parent.emit(t.type,t)),t.stop||(i.events[t.type]&&i.emit(t.type,t),t.stop||n.events[t.type]&&n.emit(t.type,t)),n.data.host&&d[t.code]&&t.preventDefault())},keypress:function(t){var e=r.current;e.activeComponent&&e.activeComponent!==e&&e.activeComponent.events[t.type]&&e.activeComponent.emit(t.type,t)},click:function(t){},contextmenu:function(t){t.preventDefault()},mousewheel:function(t){var e=r.current;e.activeComponent&&e.activeComponent!==e&&e.activeComponent.events[t.type]&&e.activeComponent.emit(t.type,t),t.stop||e.events[t.type]&&e.emit(t.type,t)}};for(s in n.defaultEvents)window.addEventListener(s,n.defaultEvents[s]);window.stbEvent={},window.stbEvent.onEvent=function(t,e){if(n.events.media){if(e)try{e=JSON.parse(e)}catch(i){}n.emit("media",{code:parseInt(t,10),info:e})}},window.stbEvent.onBroadcastMessage=function(t,e,i){n.events.message&&n.emit("message",{broadcast:!0,windowId:t,message:e,data:i})},window.stbEvent.onMessage=function(t,e,i){n.events.message&&n.emit("message",{broadcast:!1,windowId:t,message:e,data:i})},window.stbEvent.onMount=function(t){n.events["device:mount"]&&n.emit("device:mount",{state:t})},window.stbEvent.onMediaAvailable=function(){n.events["media:available"]&&n.emit("media:available")},window.stbEvent.onNetworkStateChange=function(t){n.events["internet:state"]&&n.emit("internet:state",{state:t})},window.stbEvent.onWebBrowserProgress=function(t){n.events["browser:progress"]&&n.emit("browser:progress",{progress:t})},window.stbEvent.onWindowActivated=function(){n.events["window:focus"]&&n.emit("window:focus")},window.gSTB&&gSTB.SetNativeStringMode&&gSTB.SetNativeStringMode(!0),t.exports=n},function(t,e){"use strict";t.exports={newRemoteControl:!0,weatherUrl:"http://weather.infomir.com.ua/",fileName:"weather.json"}},function(t,e,i){"use strict";var n,s=i(2);n=new s,n.current=null,n.history=[],n.pages=[],n.ids={},n.init=function(t){var e,i,n;if(t){for(this.pages=[],this.pages=t,e=0,i=t.length;i>e;e++)n=t[e],this.ids[n.id]=n,n.active&&(this.current=n);return this.events.init&&this.emit("init",{pages:t}),!0}return!1},n.parse=function(t){var e={name:"",data:[]};return e.data=t.split("/").map(decodeURIComponent),e.name=e.data.shift().slice(1),e},n.stringify=function(t,e){return e=Array.isArray(e)?e:[],t=encodeURIComponent(t),e=e.map(encodeURIComponent),e.unshift(t),e.join("/")},n.show=function(t,e){return t&&!t.active?(t.$node.classList.add("active"),t.active=!0,this.current=t,t.events.show&&t.emit("show",{page:t,data:e}),!0):!1},n.hide=function(t){return t&&t.active?(t.$node.classList.remove("active"),t.active=!1,this.current=null,t.events.hide&&t.emit("hide",{page:t}),!0):!1},n.navigate=function(t,e){var i=this.current,n=this.ids[t];return n&&!n.active?(location.hash=this.stringify(t,e),this.hide(this.current),this.show(n,e),this.events.navigate&&this.emit("navigate",{from:i,to:n}),this.history.push(n),!0):!1},n.back=function(){var t,e;return this.history.length>1&&(t=this.history.pop(),e=this.history[this.history.length-1],e&&!e.active)?(location.hash=e.id,this.hide(this.current),this.show(e),this.events.navigate&&this.emit("navigate",{from:t,to:e}),!0):!1},t.exports=n},function(t,e,i){"use strict";function n(t){t=t||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,t.type&&(this.type=t.type),t.className="list "+(t.className||""),this.type===this.TYPE_HORIZONTAL&&(t.className+=" horizontal"),a.call(this,t),this.init(t)}function s(t){var e,i;for(e=0;e<t.length;e++)i=t[e],"object"!=typeof i&&(i=t[e]={value:t[e]});return t}var a=i(1),r=i(3);n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.TYPE_VERTICAL=1,n.prototype.TYPE_HORIZONTAL=2,n.prototype.renderItemDefault=function(t,e){t.innerText=e.value},n.prototype.renderItem=n.prototype.renderItemDefault,n.prototype.defaultEvents={mousewheel:function(t){this.type===this.TYPE_VERTICAL&&t.wheelDeltaY&&this.move(t.wheelDeltaY>0?r.up:r.down),this.type===this.TYPE_HORIZONTAL&&t.wheelDeltaX&&this.move(t.wheelDeltaX>0?r.left:r.right)},keydown:function(t){switch(t.code){case r.up:case r.down:case r.right:case r.left:case r.pageUp:case r.pageDown:case r.home:case r.end:this.move(t.code);break;case r.ok:this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:t})}}},n.prototype.init=function(t){var e,i,n=this,a=this.$body.children.length,r=function(t){this.data&&(n.focusItem(this),n.events["click:item"]&&n.emit("click:item",{$item:this,event:t}))};if(void 0!==t.cycle&&(this.cycle=t.cycle),t.scroll&&(this.scroll=t.scroll),t.data&&(this.data=s(t.data)),t.render&&(this.renderItem=t.render),t.size&&(this.size=t.size),this.size!==a)for(a>0&&(this.$body.innerText=null),i=0;i<this.size;i++)e=document.createElement("div"),e.index=i,e.className="item",e.addEventListener("click",r),this.$body.appendChild(e);void 0!==t.viewIndex,this.viewIndex=null,void 0!==t.focusIndex?this.focusIndex(t.focusIndex):this.renderView(t.viewIndex||0)},n.prototype.renderView=function(t){var e,i,n,s,a;if(this.viewIndex!==t){for(s=this.viewIndex,this.viewIndex=a=t,i=0;i<this.size;i++)e=this.$body.children[i],n=this.data[t],n?(e.data=n,e.index=t,this.renderItem(e,n),n.mark?e.classList.add("mark"):e.classList.remove("mark")):(e.data=e.index=void 0,e.innerHTML="&nbsp;"),t++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:a}),void 0!==this.events["select:item"]&&this.emit("select:item",{$item:this.$body.children[this.viewIndex]}),this.scroll&&this.scroll.scrollTo(this.viewIndex),!0}return!1},n.prototype.move=function(t){(t===r.up&&this.type===this.TYPE_VERTICAL||t===r.left&&this.type===this.TYPE_HORIZONTAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling):this.cycle?(this.move(r.end),this.events.cycle&&this.emit("cycle",{direction:t})):this.events.overflow&&this.emit("overflow",{direction:t})),(t===r.down&&this.type===this.TYPE_VERTICAL||t===r.right&&this.type===this.TYPE_HORIZONTAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling):this.cycle?(this.move(r.home),this.events.cycle&&this.emit("cycle",{direction:t})):this.events.overflow&&this.emit("overflow",{direction:t})),t===r.pageUp&&(this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild)),t===r.pageDown&&(this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])),t===r.home&&(this.renderView(0),this.focusItem(this.$body.firstChild)),t===r.end&&(this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]))},n.prototype.focusItem=function(t){var e=this.$focusItem;return t&&e!==t?(null!==e&&(e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e})),this.$focusItem=t,this.$focusItem.data=this.data[this.$focusItem.index],t.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:e,$curr:t}),this.events["select:item"]&&this.emit("select:item",{$item:t}),!0):!1},n.prototype.focusIndex=function(t){var e=this.viewIndex||0;t>=e+this.size?(t=t<this.data.length-1?t:this.data.length-1,this.renderView(t-this.size+1),this.focusItem(this.$body.lastChild)):e>t?(t=t>0?t:0,this.renderView(t),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[t-e]))},n.prototype.markItem=function(t,e){e?t.classList.add("mark"):t.classList.remove("mark"),t.data.mark=e},t.exports=n},function(t,e,i){"use strict";function n(t){t=t||{},this.isActive=!1,t.focusable=t.focusable||!1,t.className="tabItem "+(t.className||""),s.call(this,t)}var s=i(1);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.activate=function(t){var e=null;return this.isActive?!1:(this.parent.current&&(e=this.parent.current,e.isActive=!1,e.$node.classList.remove("active")),this.isActive=!0,this.$node.classList.add("active"),this.parent.current=this,this.events.activate&&this.emit("activate",{data:t}),this.parent.events["item:change"]&&this.parent.emit("item:change",{prev:e,curr:this}),!0)},t.exports=n},function(t,e,i){"use strict";function n(t){var e=null,n=i(20),s=new XMLHttpRequest;s.open("GET","http://nominatim.openstreetmap.org/reverse?format=json&lat="+t.lat+"&zoom=18&addressdetails=1&lon="+t.lon+"&accept-language="+n),s.onload=function(){if(200===this.status)try{e=JSON.parse(this.responseText)}catch(t){}null!==e&&(a.location=e),a.emit("load",a.location)},s.send(null)}var s=i(2),a=new s;t.exports=a,a.location={display_name:"",lat:0,lon:0,address:{city:"",state:"",country:""}},a.load=function(t){var e,i=new XMLHttpRequest;return t.lat&&t.lon?(a.location.lat=+t.lat,a.location.lon=+t.lon,void(t.name?(t.display_name=t.name,a.location=JSON.parse(JSON.stringify(t)),e=a.location.name.split(","),a.location.address.city=e[0],a.location.address.state=e[1],a.location.address.country=e[2],a.emit("load",a.location)):n(a.location))):(i.open("GET","http://weather.infomir.com.ua/getGeo.php"),i.onload=function(){var t={data:{lon:0,lat:0}};if(200===this.status){try{t=JSON.parse(this.responseText)}catch(e){}a.location.lat=+t.data.lat,a.location.lon=+t.data.lon,n(a.location)}else a.emit("load",a.location)},void i.send(null))},a.search=function(t,e){var i=new XMLHttpRequest;i.open("GET","http://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=20&accept-language="+t.language+"&q="+t.query),i.onload=function(){if(200===this.status)try{e(JSON.parse(this.responseText),!1)}catch(t){e(null,404)}else e(null,this.status)},i.onerror=function(){e(null,this.status)},i.send(null)}},function(t,e){"use strict";var i=gettext("N"),n=gettext("NE"),s=gettext("E"),a=gettext("SE"),r=gettext("S"),o=gettext("SW"),d=gettext("W"),c=gettext("NW");t.exports=function(t){return 22.5>t?i+", ":67.5>t?n+", ":112.5>t?s+", ":157.5>t?a+", ":202.5>t?r+", ":247.5>t?o+", ":292.5>t?d+", ":337.5>t?c+", ":i+", "}},function(t,e){"use strict";t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1))+t}},function(t,e){"use strict";t.exports={113:gettext("Clear/Sunny"),116:gettext("Partly Cloudy"),119:gettext("Cloudy"),122:gettext("Overcast"),143:gettext("Mist"),176:gettext("Patchy rain nearby"),179:gettext("Patchy snow nearby"),182:gettext("Patchy sleet nearby"),185:gettext("Patchy freezing drizzle nearby"),200:gettext("Thundery outbreaks in nearby"),227:gettext("Blowing snow"),230:gettext("Blizzard"),248:gettext("Fog"),260:gettext("Freezing fog"),263:gettext("Patchy light drizzle"),266:gettext("Light drizzle"),281:gettext("Freezing drizzle"),284:gettext("Heavy freezing drizzle"),293:gettext("Patchy light rain"),296:gettext("Light rain"),299:gettext("Moderate rain at times"),302:gettext("Moderate rain"),305:gettext("Heavy rain at times"),308:gettext("Heavy rain"),311:gettext("Light freezing rain"),314:gettext("Moderate or Heavy freezing rain"),317:gettext("Light sleet"),320:gettext("Moderate or heavy sleet"),323:gettext("Patchy light snow"),326:gettext("Light snow"),329:gettext("Patchy moderate snow"),332:gettext("Moderate snow"),335:gettext("Patchy heavy snow"),338:gettext("Heavy snow"),350:gettext("Ice pellets"),353:gettext("Light rain shower"),356:gettext("Moderate or heavy rain shower"),359:gettext("Torrential rain shower"),362:gettext("Light sleet showers"),365:gettext("Moderate or heavy sleet showers"),368:gettext("Light snow showers"),371:gettext("Moderate or heavy snow showers"),374:gettext("Light showers of ice pellets"),377:gettext("Moderate or heavy showers of ice pellets"),386:gettext("Patchy light rain in area with thunder"),389:gettext("Moderate or heavy rain in area with thunder"),392:gettext("Patchy light snow in area with thunder"),395:gettext("Moderate or heavy snow in area with thunder")}},function(t,e,i){"use strict";function n(t){t=t||{},this.active=!1,this.activeComponent=null,t.className="page "+(t.className||""),s.call(this,t),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}var s=i(1);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,t.exports=n},function(t,e,i){"use strict";function n(t){t=t||{},this.current=null,t.focusable=t.focusable||!1,t.className="tabList "+(t.className||""),s.call(this,t),t.current&&t.current.activate()}var s=i(1);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.insert=function(t,e){var i;i=this.children.indexOf(t),-1!==i&&(this.children.splice(i,1),this.$body.removeChild(t.$node)),e===this.children.length?this.$body.appendChild(t.$node):this.$body.insertBefore(t.$node,this.$body.children[e]),this.children.splice(e,0,t),t.parent||(t.parent=this)},t.exports=n},function(t,e,i){"use strict";function n(t){t=t||{},this.value="",this.type=this.TYPE_TEXT,t.className="input "+(t.className||""),s.call(this,t),this.$line=t.$line,this.$line.className="line",this.$caret=t.$caret,this.$caret.className="caret",this.$placeholder=t.$placeholder,this.$placeholder.className="placeholder",this.$caret.index=0,this.init(t)}var s=i(1),a=i(3);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.TYPE_TEXT=0,n.prototype.TYPE_PASSWORD=1,n.prototype.defaultEvents={keypress:function(t){this.addChar(String.fromCharCode(t.keyCode),this.$caret.index)},keydown:function(t){switch(t.code){case a["delete"]:this.removeChar(this.$caret.index);break;case a.back:this.removeChar(this.$caret.index-1);break;case a.left:this.setCaretPosition(this.$caret.index-1);break;case a.right:this.setCaretPosition(this.$caret.index+1);break;case a.end:case a.down:this.setCaretPosition(this.value.length);break;case a.home:case a.up:this.setCaretPosition(0)}}},n.prototype.init=function(t){t.type&&(this.type=t.type),t.value&&this.setValue(t.value),t.placeholder&&(this.$placeholder.innerText=t.placeholder),this.$line.dir=t.direction||"ltr"},n.prototype.addChar=function(t,e){var i=document.createElement("div");e=void 0===e?this.$caret.index:e,0===this.value.length&&this.$line.removeChild(this.$placeholder),i.className="char",this.value=this.value.substring(0,e)+t+this.value.substring(e,this.value.length),++this.$caret.index,this.type===this.TYPE_PASSWORD?i.innerText="*":" "===t?i.innerHTML="&nbsp;":i.innerText=t,e>=this.value.length?(this.$line.appendChild(i),this.$line.appendChild(this.$caret)):(this.$line.insertBefore(this.$caret,this.$line.children[e]),this.$line.insertBefore(i,this.$caret)),this.events.input&&this.emit("input",{value:this.value})},n.prototype.removeChar=function(t){var e=this.value;t=void 0===t?this.$caret.index-1:t,this.value.length>0&&(this.$caret.index===t&&t<this.value.length?this.$line.removeChild(this.$line.children[t+1]):this.$caret.index>t&&(--this.$caret.index,this.$line.removeChild(this.$line.children[t])),this.value=this.value.substring(0,t)+this.value.substring(t+1,this.value.length),this.events.input&&e!==this.value&&this.emit("input",{value:this.value})),0===this.value.length&&this.$line.appendChild(this.$placeholder)},n.prototype.setCaretPosition=function(t){t>=0&&t<=this.value.length&&this.$caret.index!==t&&(this.$line.removeChild(this.$caret),t===this.value.length?this.$line.appendChild(this.$caret):this.$line.insertBefore(this.$caret,this.$line.children[t]),this.$caret.index=t)},n.prototype.setValue=function(t){var e,i,n=this.value.length,s=t.length,a=0;if(t!==this.value){if(s>0){if(this.$placeholder.parentNode===this.$line&&this.$line.removeChild(this.$placeholder),this.$line.removeChild(this.$caret),s!==n)if(i=s-n,i>0)for(a=0;i>a;a++)e=this.$line.appendChild(document.createElement("div")),e.className="char";else for(a=0;a>i;a--)this.$line.removeChild(this.$line.lastChild);for(a=0;s>a;a++)e=this.$line.children[a],this.type===this.TYPE_PASSWORD?e.innerHTML="*":" "===t[a]?e.innerHTML="&nbsp;":e.innerText=t[a];this.value=t,this.$caret.index=s,this.$line.appendChild(this.$caret)}else this.value="",this.$line.innerText="",this.$line.appendChild(this.$caret),this.$line.appendChild(this.$placeholder);this.events.input&&this.emit("input",{value:this.value})}},t.exports=n},function(t,e,i){"use strict";var n=i(3),s=i(4),a=i(9),r=(i(21),i(8)),o=i(30),d=i(15),c=i(7),l=new r({$node:window.pmTabAddCity}),h=new d({$node:document.getElementById("pmSearchInputNode"),$line:document.getElementById("pmSearchInputBody"),$caret:document.getElementById("pmSearchInputCaret"),$placeholder:document.getElementById("pmSearchInputPlaceholder"),placeholder:gettext("Input city"),visible:!0,events:{keydown:function(t){switch(t.code){case n["delete"]:this.removeChar(this.$caret.index);break;case n.back:this.removeChar(this.$caret.index-1);break;case n.left:this.setCaretPosition(this.$caret.index-1);break;case n.right:this.setCaretPosition(this.$caret.index+1);break;case n.end:this.setCaretPosition(this.value.length);break;case n.home:this.setCaretPosition(0);break;case n.down:l.list.focusIndex(0),l.list.focus();case n.exit:l.list.focusIndex(0),l.list.focus()}}}}),u=i(19),p=u(function(t){t.value.length?a.search({query:t.value,language:s.environment.language},function(t,e){return e||0===t.length?(l.list.data=m,l.scrollBar.init({realSize:l.list.data.length}),l.list.viewIndex=null,l.list.renderView(0),void l.list.focusIndex(0)):(l.list.data=t,l.scrollBar.init({realSize:l.list.data.length}),l.list.viewIndex=null,l.list.renderView(0),l.list.focusIndex(0),void(l.list.$node.style.visibility="visible"))}):(l.list.data=m,l.scrollBar.init({realSize:l.list.data.length}),l.list.viewIndex=null,l.list.renderView(0),l.list.focusIndex(0))},1e3),m=[{lat:50.4501,lon:30.5234,address:{city:"Kyiv",country:"Ukraine"}},{lat:55.755826,lon:37.6173,address:{city:"Moscow",country:"Russia"}},{lat:51.507351,lon:-.127758,address:{city:"London",country:"England"}},{lat:52.370216,lon:4.895168,address:{city:"Amsterdam",country:"Netherlands"}},{lat:37.983917,lon:23.72936,address:{city:"Athens",country:"Greece"}},{lat:40.712784,lon:-74.005941,address:{city:"New York",country:"USA"}}];l.scrollBar=new o({$node:window.pmSearchSuggestsScrollBar,viewSize:5,realSize:5}),l.add(l.list=new c({$node:window.pmSearchSuggestsList,scroll:l.scrollBar,size:5,data:[{display_name:"Одесса",address:{}}],events:{overflow:function(t){t.direction===n.up&&h.focus()},keydown:function(t){switch(t.code){case n.up:case n.down:case n.right:case n.left:case n.pageUp:case n.pageDown:case n.home:case n.end:this.move(t.code);break;case n.ok:this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:t})}}},render:function(t,e){t.ready||(t.innerHTML="",t.$name=t.appendChild(document.createElement("div")),t.$name.className="label",t.$region=t.appendChild(document.createElement("div")),t.$region.className="region",t.ready=!0),t.classList.remove("empty"),e.address.village||e.address.city?(t.$name.innerHTML=e.address.village?e.address.village:e.address.city,t.$region.innerHTML=gettext("Region")+": "+(e.address.state||"")+" "+(e.address.country||"")):(t.$name.innerHTML=e.display_name,t.$region.innerHTML="")}})),l.list.renderView=function(t){var e,i,n,s,a;if(this.viewIndex!==t){for(s=this.viewIndex,this.viewIndex=a=t,i=0;i<this.size;i++)e=this.$body.children[i],n=this.data[t],void 0!==n?(e.data=n,e.index=t,this.renderItem(e,n),n.mark?e.classList.add("mark"):e.classList.remove("mark")):(e.data=e.index=void 0,e.innerHTML="",e.ready=!1,e.classList.add("empty")),t++;return void 0!==this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:a}),void 0!==this.events["select:item"]&&this.emit("select:item",{$item:e}),this.scroll&&this.scroll.scrollTo(this.viewIndex),!0}return!1},l.add(h),l.addListener("activate",function(){window.pmSearchInputCaret.style.display="none",setTimeout(function(){window.pmSearchInputCaret.style.display="inline-block"},0),h.focus(),0===s.settings.locations[0].lat&&(0===a.location.lat?a.addListener("load",function(t){m.unshift(JSON.parse(JSON.stringify(t))),l.list.data=m,l.list.viewIndex=null,l.list.renderView(0),l.list.focusIndex(0)}):(m.unshift(JSON.parse(JSON.stringify(a.location))),l.list.data=m,l.list.viewIndex=null,l.list.renderView(0),l.list.focusIndex(0)))}),l.list.data=m,l.list.viewIndex=null,l.list.renderView(0),l.list.focusIndex(0),h.addListener("input",p),l.scrollBar.init({realSize:l.list.data.length}),t.exports=l},function(t,e,i){"use strict";function n(t,e){var i;if(e&&e.current){for(t.normalizedWeather||(t.normalizedWeather=t.weather.normalizeForecast(e)),t.$currentTemp.innerHTML=t.normalizedWeather.current.temperature,t.$currentTempToday.innerHTML='<span class="tempTodayDay">'+t.normalizedWeather.current.temperatureDay+'</span>&nbsp;&nbsp;/&nbsp;&nbsp;<span class="tempTodayNight">'+t.normalizedWeather.current.temperatureNight+"</span>",t.$currentDate.innerText=t.normalizedWeather.current.dayName+", "+t.normalizedWeather.current.date,t.$currentWind.innerText=t.normalizedWeather.current.windSpeed,t.$currentHumidity.innerText="Влажность "+t.normalizedWeather.current.humidity,t.$currentDescription.innerText=t.normalizedWeather.current.description,t.$currentIcon.style.backgroundImage="url("+t.normalizedWeather.current.indicator+")",i=0;3>i;++i)t["$day"+i+"Date"].innerText=t.normalizedWeather.days[i].dayName,t["$day"+i+"Icon"].style.backgroundImage="url("+t.normalizedWeather.days[i].indicator+")",t["$day"+i+"Temp"].innerHTML=t.normalizedWeather.days[i].temperatureDay+"&nbsp;&nbsp;/&nbsp;&nbsp;"+t.normalizedWeather.days[i].temperatureNight;t.$body.classList.remove("loading")}else t.$currentTemp.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",t.$currentDate.innerHTML="&nbsp;",t.$currentWind.innerHTML="&nbsp;",t.$currentDescription.innerHTML=gettext("Loading")+".......",t.$day0Temp.innerHTML="&nbsp;",t.$day1Temp.innerHTML="&nbsp;"}function s(t){var e,i,s=this;this.ready=!1,this.normalizedWeather=!1,this.$currentTemp=document.createElement("div"),this.$currentTemp.className="currentTemp",this.$currentTempToday=document.createElement("div"),this.$currentTempToday.className="currentTempToday",this.$currentDate=document.createElement("div"),this.$currentDate.className="currentDate",this.$currentWind=document.createElement("div"),this.$currentWind.className="currentWind",this.$currentHumidity=document.createElement("div"),this.$currentHumidity.className="currentHumidity",this.$currentDescription=document.createElement("div"),this.$currentDescription.className="currentDescription",this.$currentIcon=document.createElement("div"),this.$currentIcon.className="currentIcon",this.$day0Date=document.createElement("div"),this.$day0Date.className="dayDate",this.$day0Icon=document.createElement("div"),this.$day0Icon.className="dayIcon",this.$day0Temp=document.createElement("div"),this.$day0Temp.className="dayTemp",this.$day1Date=document.createElement("div"),this.$day1Date.className="dayDate",this.$day1Icon=document.createElement("div"),this.$day1Icon.className="dayIcon",this.$day1Temp=document.createElement("div"),this.$day1Temp.className="dayTemp",this.$day2Date=document.createElement("div"),this.$day2Date.className="dayDate",this.$day2Icon=document.createElement("div"),this.$day2Icon.className="dayIcon",this.$day2Temp=document.createElement("div"),this.$day2Temp.className="dayTemp",this.weather=new r({location:t.location,events:{change:function(t){s.ready&&(s.normalizedWeather=!1,n(s,t))},error:function(t){s.ready||n(s,!1)}}}),t.className="tabWeather",a.call(this,t),e=document.createElement("div"),e.className="row",i=e.appendChild(document.createElement("div")),i.className="cell",i.appendChild(this.$currentTemp),i.appendChild(this.$currentTempToday),i=e.appendChild(document.createElement("div")),i.className="cell wide",i.appendChild(this.$currentDate),i.appendChild(document.createElement("hr")),i.appendChild(this.$currentHumidity),i.appendChild(this.$currentWind),i.appendChild(this.$currentDescription),i=e.appendChild(document.createElement("div")),i.className="cell",i.appendChild(this.$currentIcon),this.$body.appendChild(e),e=document.createElement("div"),e.className="row",i=e.appendChild(document.createElement("div")),i.className="cell",i.appendChild(this.$day0Date),i.appendChild(this.$day0Icon),i.appendChild(this.$day0Temp),i=e.appendChild(document.createElement("div")),i.className="cell wide",i.appendChild(this.$day1Date),i.appendChild(this.$day1Icon),i.appendChild(this.$day1Temp),i=e.appendChild(document.createElement("div")),i.className="cell",i.appendChild(this.$day2Date),
i.appendChild(this.$day2Icon),i.appendChild(this.$day2Temp),this.$body.appendChild(e),this.$body.classList.add("loading"),setTimeout(function(){s.ready=!0,s.weather.forecast&&n(s,s.weather.forecast)},0)}var a=(i(3),i(8)),r=i(22);s.prototype=Object.create(a.prototype),s.prototype.constructor=a,t.exports=s},function(t,e,i){"use strict";function n(t){var e=this;t=t||{},this.list=t.list||null,this.tabList=t.tabList||null,this.currentTabIndex=0,t.className="tabList "+(t.className||""),a.call(this,t),this.list||(this.list=new r({data:t.labels})),this.add(this.list),this.list.addListener("focus:item",function(t){e.activateTab(t.$curr.index)}),this.tabList||(this.tabList=new o),this.tabList.propagate=!0,this.add(this.tabList),this.addListener("keydown",function(t){switch(t.code){case s.right:case s.left:this.list.move(t.code),this.list.$focusItem.index!==this.currentTabIndex&&this.activateTab(this.list.$focusItem.index)}})}var s=i(3),a=i(1),r=i(7),o=(i(8),i(14));n.prototype=Object.create(a.prototype),n.prototype.constructor=a,n.prototype.addTab=function(t){var e;t.index=t.index||this.tabList.children.length,t.activate=!!t.activate,this.tabList.insert(t.tab,t.index),"1"===this.list.data[0].value&&(this.list.data=[]),this.list.data.splice(t.index,0,{value:t.label}),e=this.list.viewIndex,this.list.viewIndex=null,t.activate?(this.list.focusIndex(t.index),t.tab.activate(t.data)):this.list.renderView(e),this.emit("add:tab",{tab:t.tab,index:t.index})},n.prototype.removeTab=function(t){var e;e=this.tabList.children[t],e.remove(),this.list.data.splice(t,1),this.list.viewIndex=null,this.list.focusIndex(t-1),this.currentTabIndex===t&&(this.tabList.children[t-1].activate(),--this.currentTabIndex),this.emit("remove:tab",{tab:e,index:t})},n.prototype.activateTab=function(t){t!==this.currentTabIndex&&(this.currentTabIndex=t,this.list.focusIndex(t),this.tabList.children[t].activate())},t.exports=n},function(t,e){"use strict";t.exports=function(t,e){var i;return function(){var n=this,s=arguments;clearTimeout(i),i=setTimeout(function(){i=null,t.apply(n,s)},e)}}},function(t,e){"use strict";t.exports=function(t){var e=JSON.parse(gSTB.GetEnv('{"varList":["language"]}')),i="en";return t=t||["en","ru","uk","de","tr"],!e.errMsg&&e.result&&e.result.language&&"string"==typeof e.result.language&&(e.result.language=e.result.language.toLowerCase(),-1!==t.indexOf(e.result.language)&&(i=e.result.language)),i}},function(t,e,i){"use strict";function n(){$>5?(u.emit("error"),$=0,clearTimeout(x),clearTimeout(b),b=setTimeout(function(){s()},E)):(clearTimeout(x),x=setTimeout(function(){s()},T))}function s(t){var e=new XMLHttpRequest;e.open("GET",y),e.onload=function(){var e=null;try{e=JSON.parse(this.responseText)}catch(i){}200===this.status&&e&&0===e.code?(u.hash=e.data,u.getForecast(t)):(++$,n(),u.emit("load"))},e.timeout=10,e.ontimeout=e.onerror=function(){++$,n(),u.emit("load")},e.send(null)}var a=0,r=1,o=2,d=3,c=5,l=i(4),h=i(2),u=new h,p=i(5),m=i(11),v=i(10),g=i(12),y=p.weatherUrl+"getCheck.php?id="+l.environment.Image_Desc+"&mac="+gSTB.GetDeviceMacAddress()+"&sn="+gSTB.GetDeviceSerialNumber(),f=[gettext("January"),gettext("February"),gettext("March"),gettext("April"),gettext("May"),gettext("June"),gettext("July"),gettext("August"),gettext("September"),gettext("October"),gettext("November"),gettext("December")],w=[gettext("Sunday "),gettext("Monday "),gettext("Tuesday "),gettext("Wednesday "),gettext("Thursday "),gettext("Friday "),gettext("Saturday ")],x=-1,b=-1,$=0,T=6e4*m(10,50),E=6e4*m(120,360);t.exports=u,u.hash="",u.isLoaded=!1,u.location={lat:0,lon:0},u.normalizeForecast=function(t,e){var i,n,s,a,r={current:{dayName:"",date:"",indicator:"",description:"",temperatureDay:"",temperatureNight:"",temperature:"",humidity:"",windSpeed:""},days:[{dayName:"",date:"",indicator:"",description:"",temperatureDay:"",temperatureNight:""},{dayName:"",date:"",indicator:"",description:"",temperatureDay:"",temperatureNight:""},{dayName:"",date:"",indicator:"",description:"",temperatureDay:"",temperatureNight:""}]};for(i=!!t.current.day,s=t.days[0],r.current.indicator="img/weather/"+(i?"day/":"night/")+s.id+".png",r.current.description=g[s.id],r.current.windSpeed=v(t.current.wd),e?(r.current.temperature=t.current.tcf+"&deg;F",r.current.temperatureDay=s.thf+"&deg;F",r.current.temperatureNight=s.tlf+"&deg;F",r.current.windSpeed+=t.current.wsm.toFixed(1)+" "+gettext("miles/h")):(r.current.temperature=t.current.tcc+"&deg;C",r.current.temperatureDay=s.thc+"&deg;C",r.current.temperatureNight=s.tlc+"&deg;C",r.current.windSpeed+=t.current.wsk.toFixed(1)+" "+gettext("m/s")),r.current.humidity=t.current.h+" %",a=s.d.split("-"),s=new Date(a[0],a[1]-1,a[2]),r.current.dayName=w[s.getDay()],r.current.date=a[2]+" "+f[a[1]-1],n=1;4>n;++n)s=t.days[n],r.days[n-1].dayName="",r.days[n-1].date="",r.days[n-1].indicator="img/weather/"+(i?"day/":"night/")+s.id+".png",r.days[n-1].description=g[s.id],e?(r.days[n-1].temperatureDay=s.thf+"&deg;F",r.days[n-1].temperatureNight=s.tlf+"&deg;F"):(r.days[n-1].temperatureDay=s.thc+"&deg;C",r.days[n-1].temperatureNight=s.tlc+"&deg;C"),a=s.d.split("-"),s=new Date(a[0],a[1]-1,a[2]),r.days[n-1].dayName=w[s.getDay()],r.days[n-1].date=a[2]+" "+f[a[1]-1];return r},u.getForecast=function(t){var e="lat="+u.location.lat+"&lon="+u.location.lon,i=gSTB.GetHashVersion1(Math.round(100*u.location.lat)/100+","+Math.round(100*u.location.lon)/100,u.hash),l=p.weatherUrl+"getData.php?"+e+"&hk="+i,h=new XMLHttpRequest;h.open("GET",l),h.onload=function(){if(200===this.status){try{u.forecast=JSON.parse(this.responseText)}catch(e){return++$,n(),void u.emit("load")}switch(u.forecast.code){case a:if(u.forecast=u.forecast.data,u.emit("load"),u.forecast.current){if(t)return void t(u.forecast);u.emit("change",u.forecast)}else++$;n();break;case r:case o:case c:setTimeout(function(){s(t)},1e4),u.emit("load");break;case d:++$,n(),u.emit("load");break;default:++$,n(),u.emit("load")}}else++$,n(),u.emit("load")},h.send(null)},u.load=function(t,e){u.location.lat=+t.lat,u.location.lon=+t.lon,clearTimeout(x),clearTimeout(b),u.location.lat&&u.location.lon&&s(e)}},function(t,e,i){"use strict";function n(t){this.forecast={},this.location=t.location||null,this.updateTimeout=-1,this.badRequests=0,a.call(this),t.events&&this.addListeners(t.events),this.location&&this.getForecast(this.location)}var s=i(4),a=i(2),r=i(5),o=i(11),d=i(10),c=i(12),l=[gettext("January"),gettext("February"),gettext("March"),gettext("April"),gettext("May"),gettext("June"),gettext("July"),gettext("August"),gettext("September"),gettext("October"),gettext("November"),gettext("December")],h=[gettext("Sunday "),gettext("Monday "),gettext("Tuesday "),gettext("Wednesday "),gettext("Thursday "),gettext("Friday "),gettext("Saturday ")],u=60*o(10,50),p=6e4*o(120,360),m={data:null,url:r.weatherUrl+"getCheck.php?id="+s.environment.Image_Desc+"&mac="+gSTB.GetDeviceMacAddress()+"&sn="+gSTB.GetDeviceSerialNumber(),updateTimeout:-1,update:function(t){var e=this,i=new XMLHttpRequest;i.open("GET",this.url),i.onload=function(){var i=null;try{i=JSON.parse(this.responseText)}catch(n){}200===this.status&&i&&0===i.code?(e.data=i.data,t&&t()):e.updateTimeout=setTimeout(function(){e.update(t)},u)},i.timeout=10,i.ontimeout=i.onerror=function(){e.updateTimeout=setTimeout(function(){e.update(t)},u)},i.send(null)}},v=["rain","rain"],g=["snow","snow"],y={113:["sun","moon"],116:["cloud","cloud"],119:["suncloud","mooncloud"],122:["suncloud","mooncloud"],143:["shower","shower"],248:["shower","shower"],260:["shower","shower"],176:v,200:v,263:v,266:v,293:v,296:v,299:v,302:v,305:v,308:v,353:v,356:v,359:v,386:v,389:v,179:g,182:g,185:g,227:g,230:g,281:g,284:g,311:g,314:g,317:g,320:g,323:g,326:g,329:g,332:g,335:g,338:g,350:g,362:g,365:g,368:g,371:g,374:g,377:g,392:g,395:g};n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.prototype.RESPONSE_CODE_OK=0,n.prototype.RESPONSE_CODE_CODE_NO_DATA=1,n.prototype.RESPONSE_CODE_STALE_DATA=2,n.prototype.RESPONSE_CODE_BAD_PARAMS=3,n.prototype.RESPONSE_CODE_BAD_HASH=5,n.prototype.normalizeForecast=function(t,e){var i,n,a,r,o={current:{dayName:"",date:"",indicator:"",description:"",temperatureDay:"",temperatureNight:"",temperature:"",humidity:"",windSpeed:""},days:[{dayName:"",date:"",indicator:"",description:"",temperatureDay:"",temperatureNight:""},{dayName:"",date:"",indicator:"",description:"",temperatureDay:"",temperatureNight:""},{dayName:"",date:"",indicator:"",description:"",temperatureDay:"",temperatureNight:""}]};for(i=t.current.day,a=t.days[0],o.current.indicator="img/"+s.data.metrics.height+"/icon.large."+y[a.id][i]+".png",o.current.description=c[a.id],o.current.windSpeed=d(t.current.wd),e?(o.current.temperature=t.current.tcf+"&deg;F",o.current.temperatureDay=a.thf+"&deg;F",o.current.temperatureNight=a.tlf+"&deg;F",o.current.windSpeed+=t.current.wsm.toFixed(1)+" "+gettext("miles/h")):(o.current.temperature=t.current.tcc+"&deg;C",o.current.temperatureDay=a.thc+"&deg;C",o.current.temperatureNight=a.tlc+"&deg;C",o.current.windSpeed+=t.current.wsk.toFixed(1)+" "+gettext("m/s")),o.current.humidity=t.current.h+" %",r=a.d.split("-"),a=new Date(r[0],r[1]-1,r[2]),o.current.dayName=h[a.getDay()],o.current.date=r[2]+" "+l[r[1]-1],n=1;4>n;++n)a=t.days[n],o.days[n-1].dayName="",o.days[n-1].date="",o.days[n-1].indicator="img/"+s.data.metrics.height+"/icon.small."+y[a.id][i]+".png",o.days[n-1].description=c[a.id],e?(o.days[n-1].temperatureDay=a.thf+"&deg;F",o.days[n-1].temperatureNight=a.tlf+"&deg;F"):(o.days[n-1].temperatureDay=a.thc+"&deg;C",o.days[n-1].temperatureNight=a.tlc+"&deg;C"),r=a.d.split("-"),a=new Date(r[0],r[1]-1,r[2]),o.days[n-1].dayName=h[a.getDay()],o.days[n-1].date=r[2]+" "+l[r[1]-1];return o},n.prototype.getForecast=function(t){var e=this,i="lat="+t.lat+"&lon="+t.lon,n=gSTB.GetHashVersion1(Math.round(100*t.lat)/100+","+Math.round(100*t.lon)/100,m.data),s=r.weatherUrl+"getData.php?"+i+"&hk="+n,a=new XMLHttpRequest;a.open("GET",s),clearTimeout(this.updateTimeout),a.onload=function(){var i;try{i=JSON.parse(this.responseText)}catch(n){++e.badRequests,e.updateTimeout=setTimeout(function(){m.update(function(){e.getForecast(t)})},u),i={code:-1}}switch(i.code){case e.RESPONSE_CODE_OK:e.forecast=i.data,e.forecast.current&&e.emit("change",e.forecast),e.updateTimeout=setTimeout(function(){e.getForecast(t)},p);break;case e.RESPONSE_CODE_CODE_NO_DATA:case e.RESPONSE_CODE_STALE_DATA:case e.RESPONSE_CODE_BAD_HASH:case e.RESPONSE_CODE_BAD_PARAMS:default:e.emit("error",i.code),e.updateTimeout=setTimeout(function(){m.update(function(){e.getForecast(t)})},u)}},a.send(null)},t.exports=n},function(t,e,i){"use strict";t.exports=new(i(13))({$node:window.pageInit})},function(t,e,i){"use strict";var n=i(3),s=i(4),a=i(7),r=i(14),o=i(18),d=i(17),c=(i(5),new(i(13))({$node:window.pageMain}));t.exports=c,c.addListener("load",function(){c.widgetMain=new o({tabList:new r({$node:window.pmTabList}),list:new a({$node:window.pmTabsHeaders,type:a.prototype.TYPE_HORIZONTAL,size:4,data:["1"],render:function(t,e){t.innerText=e.value}})}),0!==s.settings.locations[0].lat&&s.settings.locations.forEach(function(t){c.widgetMain.addTab({tab:new d({location:t}),label:t.name})}),c.widgetMain.addTab({tab:c.addCityTab=i(16),label:gettext("Add city")}),c.addCityTab.list.addListener("click:item",function(t){var e=t.$item.data;s.settings.locations.filter(function(t){return t.lat===e.lat?!0:void 0}).length>0||(0===s.settings.locations[0].lat?s.settings.locations[0]={name:e.address.village||e.address.city||e.display_name,address:{state:e.address.state,village:e.address.village,city:e.address.city,county:e.address.county},lat:e.lat,lon:e.lon}:s.settings.locations.push({name:e.address.village||e.address.city||e.display_name,address:{state:e.address.state,village:e.address.village,city:e.address.city,county:e.address.county},lat:e.lat,lon:e.lon}),e=s.settings.locations[s.settings.locations.length-1],c.widgetMain.addTab({tab:new d({location:e}),label:e.name,index:s.settings.locations.length,activate:!0}))})}),c.addListener("show",function(){try{c.widgetMain.currentTabIndex=null,c.widgetMain.activateTab(0)}catch(t){}}),c.addListener("keydown",function(t){switch(t.code){case n.right:case n.left:c.tabHeaders.emit("keydown",t);break;case n.exit:s.exit()}})},function(module,exports,__webpack_require__){"use strict";var Emitter=__webpack_require__(2),gettext=new Emitter,meta=null,data=null;gettext.load=function(t,e){var i=new XMLHttpRequest;t.ext=t.ext||"json",t.path=t.path||"lang",i.responseType="text",i.onload=function(){var t;try{t=JSON.parse(i.responseText),meta=t.meta,data=t.data,e(null,data)}catch(n){meta=null,data=null,i.onerror(n)}gettext.events.load&&gettext.emit("load")},i.onerror=function(t){e(t),gettext.events.error&&gettext.emit("error")},i.open("GET",t.path+"/"+t.name+"."+t.ext,!0),i.send(null)},window.gettext=function(t){return data&&data[""][t]?data[""][t]:t},window.pgettext=function(t,e){return data&&data[t][e]?data[t][e]:e},window.ngettext=function(msgId,plural,value){return data&&meta?data[""][msgId][eval("var n = "+value+"; "+meta.plural)]:1===value?msgId:plural},module.exports=gettext},function(t,e,i){"use strict";function n(t){s.call(this),this.data=t||{}}var s=i(2);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.idName="id",n.prototype.clear=function(){var t=this.data;return Object.keys(t).length>0?(this.data={},this.events.clear&&this.emit("clear",{data:t}),!0):!1},n.prototype.init=function(t){return t?(this.clear(),this.data=t,this.events.init&&this.emit("init",{data:t}),!0):!1},n.prototype.has=function(t){return this.data.hasOwnProperty(t)},n.prototype.get=function(t){return this.data[t]},n.prototype.set=function(t,e){var i=t in this.data,n={name:t,curr:e};return i?(n.prev=this.data[t],e!==n.prev?(this.data[t]=e,this.events.change&&this.emit("change",n),!0):!1):(this.data[t]=e,this.events.change&&this.emit("change",n),!0)},n.prototype.unset=function(t){var e,i=t in this.data;return i?(e={name:t,prev:this.data[t]},delete this.data[t],this.events.change&&this.emit("change",e),!0):!1},t.exports=n},function(t,e){"use strict";if(!("classList"in document.documentElement)){var i=Array.prototype,n=i.indexOf,s=i.slice,a=i.push,r=i.splice,o=i.join;window.DOMTokenList=function(t){if(this._element=t,t.className!==this._classCache){if(this._classCache=t.className,!this._classCache)return;var e,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(e=0;e<i.length;e++)a.call(this,i[e])}},window.DOMTokenList.prototype={add:function(t){this.contains(t)||(a.call(this,t),this._element.className=s.call(this,0).join(" "))},contains:function(t){return-1!==n.call(this,t)},item:function(t){return this[t]||null},remove:function(t){var e=n.call(this,t);-1!==e&&(r.call(this,e,1),this._element.className=s.call(this,0).join(" "))},toString:function(){return o.call(this," ")},toggle:function(t){return this.contains(t)?this.remove(t):this.add(t),this.contains(t)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(t,e){"use strict";t.exports=function(t){var e={};return t.split("&").forEach(function(t){t=t.split("="),2===t.length&&(e[t[0]]=decodeURIComponent(t[1]))}),e}},function(t,e,i){"use strict";var n=i(28);t.exports=function(){var t=n(location.search.substring(1));return t.referrer?decodeURIComponent(t.referrer):document.referrer?location.href.split("#")[0]===document.referrer?!1:document.referrer:!1}},function(t,e,i){"use strict";function n(t){t=t||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,t.focusable=t.focusable||!1,t.className="scrollBar "+(t.className||""),t.type&&(this.type=t.type),this.type===this.TYPE_HORIZONTAL&&(t.className+=" horizontal"),s.call(this,t),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(t)}var s=i(1);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.TYPE_VERTICAL=1,n.prototype.TYPE_HORIZONTAL=2,n.prototype.init=function(t){t=t||{},t.realSize&&(this.realSize=t.realSize),t.viewSize&&(this.viewSize=t.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==t.value&&this.scrollTo(t.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},n.prototype.scrollTo=function(t){return this.value!==t?((0===this.thumbRect.height||0===this.thumbRect.width)&&(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*t/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*t/(this.realSize-this.viewSize)+"px",this.events.change&&this.emit("change",{curr:t,prev:this.value}),t>=this.realSize&&(t=this.realSize,this.events.done&&this.emit("done")),this.value=t,!0):!1},t.exports=n},function(t,e){"use strict";t.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:28,availLeft:54},720:{height:720,width:1280,availTop:10,availBottom:10,availRight:10,availLeft:10},1080:{height:1080,width:1920,availTop:15,availBottom:15,availRight:15,availLeft:15}}}]);